"use strict";(self["webpackChunkvue_oldbook"]=self["webpackChunkvue_oldbook"]||[]).push([[683],{3448:function(e,t,r){r.d(t,{Z:function(){return h}});var a=function(){var e=this,t=e._self._c;return t("header",[t("div",{staticClass:"search-return",on:{click:e.goBack}},[t("i",{staticClass:"iconfont icon-fanhui"})]),t("div",{staticClass:"search-main"},[t("i",{staticClass:"iconfont icon-fangdajing"}),t("form",{attrs:{action:"",onsubmit:"return false"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.goSearchList.apply(null,arguments)}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchVal,expression:"searchVal"}],ref:"myInput",attrs:{type:"search",placeholder:"搜索您喜欢的产品...",autofocus:""},domProps:{value:e.searchVal},on:{input:function(t){t.target.composing||(e.searchVal=t.target.value)}}})])]),t("div",{staticClass:"serach-btn",on:{click:e.goSearchList}},[e._v("搜索")])])},s=[],n=(r(541),r(7658),{data(){return{searchVal:this.$route.query.key||"",searchArr:[]}},mounted(){window.addEventListener("touchmove",this.myTouchMove,!0)},methods:{myTouchMove(){this.$refs.myInput.blur()},goBack(){this.$router.back()},goSearchList(){if(!this.searchVal)return;localStorage.getItem("searchList")?this.searchArr=JSON.parse(localStorage.getItem("searchList")):localStorage.setItem("searchList","[]"),this.searchArr.unshift(this.searchVal);let e=new Set(this.searchArr);localStorage.setItem("searchList",JSON.stringify(Array.from(e))),this.searchVal!==this.$route.query.key&&this.$router.push({name:"list",query:{key:this.searchVal}})}}}),i=n,o=r(1001),c=(0,o.Z)(i,a,s,!1,null,"55b82fe8",null),h=c.exports},7683:function(e,t,r){r.r(t),r.d(t,{default:function(){return f}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search-index"},[t("Header"),t("section",[e.searchArr.length?t("div",{staticClass:"search-history"},[t("h2",[t("i",{staticClass:"iconfont icon-shijian"}),t("span",[e._v("搜索历史")]),t("span",{on:{click:e.deleteStorage}},[e._v("清空历史记录")])]),t("ul",e._l(e.searchArr,(function(r,a){return t("li",{key:a,on:{click:function(t){return e.goSearchList(r)}}},[e._v(e._s(r))])})),0)]):t("div",[e._v("暂无搜索记录...")])]),t("Tabbar")],1)},s=[],n=(r(7658),r(3448)),i=r(527),o=r(4843),c={name:"Search-index",data(){return{searchArr:[]}},components:{Tabbar:i.Z,Header:n.Z},created(){this.searchArr=JSON.parse(localStorage.getItem("searchList"))||[]},methods:{deleteStorage(){(0,o.MessageBox)({title:"提示",message:"确定执行此操作？",showCancelButton:!0}).then((e=>{"confirm"==e&&(localStorage.removeItem("searchList"),this.searchArr=[])}))},goSearchList(e){this.$router.push({name:"list",query:{key:e}})}}},h=c,l=r(1001),u=(0,l.Z)(h,a,s,!1,null,"39f3cdfc",null),f=u.exports},5117:function(e,t,r){var a=r(6330),s=TypeError;e.exports=function(e,t){if(!delete e[t])throw s("Cannot delete property "+a(t)+" of "+a(e))}},541:function(e,t,r){var a=r(2109),s=r(7908),n=r(6244),i=r(3658),o=r(5117),c=r(7207),h=1!==[].unshift(0),l=!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}}();a({target:"Array",proto:!0,arity:1,forced:h||l},{unshift:function(e){var t=s(this),r=n(t),a=arguments.length;if(a){c(r+a);var h=r;while(h--){var l=h+a;h in t?t[l]=t[h]:o(t,l)}for(var u=0;u<a;u++)t[u]=arguments[u]}return i(t,r+a)}})}}]);
//# sourceMappingURL=683.b1ce55a5.js.map