{"version":3,"file":"js/100.4938b3ad.js","mappings":"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","sources":["webpack://vue-oldbook/./src/views/Cart.vue","webpack://vue-oldbook/src/views/Cart.vue","webpack://vue-oldbook/./src/views/Cart.vue?5135","webpack://vue-oldbook/./src/views/Cart.vue?12c1"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"cart container\"},[_c('header',[_c('i',{staticClass:\"iconfont icon-fanhui\",on:{\"click\":function($event){return _vm.$router.back()}}}),_c('span',[_vm._v(\"购物车\")]),_c('span',{domProps:{\"textContent\":_vm._s(_vm.isNavStatus ? \"完成\":\"编辑\")},on:{\"click\":_vm.isNavBar}})]),(_vm.list.length)?_c('section',[_c('div',{staticClass:\"cart-title\"},[_c('van-checkbox',{attrs:{\"value\":_vm.isCheckedAll},on:{\"click\":_vm.checkAllFn}}),_c('span',[_vm._v(\"商品\")])],1),_c('ul',_vm._l((_vm.list),function(item,index){return _c('li',{key:index},[_c('div',{staticClass:\"check\"},[_c('van-checkbox',{on:{\"click\":function($event){return _vm.checkItem(index)}},model:{value:(item.checked),callback:function ($$v) {_vm.$set(item, \"checked\", $$v)},expression:\"item.checked\"}})],1),_c('h2',[_c('img',{attrs:{\"src\":item.goods_imgUrl,\"alt\":\"\"}})]),_c('div',{staticClass:\"goods\"},[_c('div',{staticClass:\"goods-title\"},[_c('span',[_vm._v(_vm._s(item.goods_name))]),_c('i',{staticClass:\"iconfont icon-icon\",on:{\"click\":function($event){return _vm.delGoodsFn(item.id)}}})]),_c('div',{staticClass:\"goods-price\"},[_vm._v(\"￥\"+_vm._s(item.goods_price))]),_c('van-stepper',{attrs:{\"integer\":\"\"},on:{\"change\":function($event){return _vm.changeNum($event,item)}},model:{value:(item.goods_num),callback:function ($$v) {_vm.$set(item, \"goods_num\", $$v)},expression:\"item.goods_num\"}})],1)])}),0)]):_c('section',[_vm._v(\" 没有购物车数据 \"),_c('router-link',{attrs:{\"to\":\"/home\"}},[_vm._v(\"去首页逛逛吧\")])],1),(_vm.list.length)?_c('footer',[_c('div',{staticClass:\"radio\"},[_c('van-checkbox',{attrs:{\"value\":_vm.isCheckedAll},on:{\"click\":_vm.checkAllFn}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isNavStatus),expression:\"!isNavStatus\"}],staticClass:\"total\"},[_c('div',[_vm._v(\"共有 \"),_c('span',{staticClass:\"total-active\"},[_vm._v(_vm._s(_vm.total.num))]),_vm._v(\" 件商品 \")]),_c('div',[_c('span',[_vm._v(\"总计:\")]),_c('span',{staticClass:\"total-active\"},[_vm._v(\"￥\"+_vm._s(_vm.total.price.toFixed(2)))])])]),(_vm.isNavStatus)?_c('div',{staticClass:\"order\",on:{\"click\":_vm.delGoodsFn}},[_vm._v(\"删除\")]):_c('div',{staticClass:\"order\",on:{\"click\":_vm.goPay}},[_vm._v(\"去结算\")])]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div class=\"cart container\">\r\n\t\t<header>\r\n\t\t\t<i class=\"iconfont icon-fanhui\" @click=\"$router.back()\"></i>\r\n\t\t\t<span>购物车</span>\r\n\t\t\t<span @click=\"isNavBar\" v-text='isNavStatus ? \"完成\":\"编辑\"'></span>\r\n\t\t</header>\r\n\t\t<section v-if=\"list.length\">\r\n\t\t\t<div class=\"cart-title\">\r\n\t\t\t\t<van-checkbox @click=\"checkAllFn\":value=\"isCheckedAll\"></van-checkbox>\r\n\t\t\t\t<span>商品</span>\r\n\t\t\t</div>\r\n\t\t\t<ul>\r\n\t\t\t\t<li v-for=\"(item,index) in list\" :key=\"index\">\r\n\t\t\t\t\t<div class=\"check\">\r\n\t\t\t\t\t\t<van-checkbox @click=\"checkItem(index)\" v-model=\"item.checked\"></van-checkbox>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<h2>\r\n\t\t\t\t\t\t<img :src=\"item.goods_imgUrl\" alt=\"\"/>\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t\t<div class=\"goods\">\r\n\t\t\t\t\t\t<div class=\"goods-title\">\r\n\t\t\t\t\t\t\t<span>{{item.goods_name}}</span>\r\n\t\t\t\t\t\t\t<i class=\"iconfont icon-icon\" @click=\"delGoodsFn(item.id)\"></i>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"goods-price\">￥{{item.goods_price}}</div>\r\n\t\t\t\t\t\t<van-stepper @change=\"changeNum($event,item)\" v-model=\"item.goods_num\" integer />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</section>\r\n\t\t<section v-else>\r\n\t\t\t没有购物车数据\r\n\t\t\t<router-link to=\"/home\">去首页逛逛吧</router-link>\r\n\t\t</section>\r\n\t\t<footer v-if=\"list.length\">\r\n\t\t\t<div class=\"radio\">\r\n\t\t\t\t<van-checkbox @click=\"checkAllFn\":value=\"isCheckedAll\"></van-checkbox>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"total\" v-show=\"!isNavStatus\">\r\n\t\t\t\t<div>共有 \r\n\t\t\t\t\t<span class=\"total-active\">{{total.num}}</span>\r\n\t\t\t\t\t件商品\r\n\t\t\t\t </div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<span>总计:</span>\r\n\t\t\t\t\t<span class=\"total-active\">￥{{total.price.toFixed(2)}}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"order\" v-if=\"isNavStatus\" @click=\"delGoodsFn\">删除</div>\r\n\t\t\t<div class=\"order\" v-else=\"isNavStatus\" @click=\"goPay\">去结算</div>\r\n\t\t</footer>\r\n\t</div>\n</template>\n\n<script>\r\n\timport { Toast } from 'mint-ui';\r\n\timport http from '@/common/api/request.js'\r\n\timport {mapState,mapMutations,mapActions,mapGetters} from 'vuex'\r\n\texport default{\r\n\t\tname:\"Cart\",\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\tisNavStatus:false,\r\n\t\t\t\tchecked:true,\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\t...mapState({\r\n\t\t\t\tlist:state=>state.cart.list,\r\n\t\t\t\tselectList:state=>state.cart.selectList\r\n\t\t\t}),\r\n\t\t\t...mapGetters(['isCheckedAll','total'])\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.getData()\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t...mapMutations(['cartList','checkItem','initOrder']),\r\n\t\t\t...mapActions(['checkAllFn','delGoodsFn']),\r\n\t\t\tasync getData(){\r\n\t\t\t\tlet res = await http.$axios({\r\n\t\t\t\t\turl:'/api/selectCart',\r\n\t\t\t\t\tmethods:'post',\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\ttoken:true\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tres.data.forEach(v=>{\r\n\t\t\t\t\tv['checked']=true\r\n\t\t\t\t})\r\n\t\t\t\tthis.cartList(res.data)\r\n\t\t\t},\r\n\t\t\t// 点击编辑或完成\r\n\t\t\tisNavBar(){\r\n\t\t\t\tthis.isNavStatus = !this.isNavStatus\r\n\t\t\t},\r\n\t\t\t// 修改数量\r\n\t\t\tchangeNum(value,item){\r\n\t\t\t\t//当前 购物车商品的 id以及  修改后的数量==》传递给后端\r\n\t\t\t\t//value 就是修改后的数量\r\n\t\t\t\t//item.id 就是购物车商品的id\r\n\t\t\t\thttp.$axios({\r\n\t\t\t\t\turl:'/api/updateNum',\r\n\t\t\t\t\tmethod:'post',\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\ttoken:true\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\tid:item.id,\r\n\t\t\t\t\t\tnum:value\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\t\r\n\t\t\t// 去结算\r\n\t\t\tgoPay(){\r\n\t\t\t\tif( !this.selectList.length ){\r\n\t\t\t\t\tToast('请至少选择一件商品');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tlet newList = [];\r\n\t\t\t\tthis.list.forEach(item=>{\r\n\t\t\t\t\tthis.selectList.filter(v=>{\r\n\t\t\t\t\t\tif( v == item.id ){\r\n\t\t\t\t\t\t\tnewList.push( item );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t// 生成一个订单\r\n\t\t\t\thttp.$axios({\r\n\t\t\t\t\turl:'/api/addOrder',\r\n\t\t\t\t\tmethod:'post',\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\ttoken:true\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\tarr:newList\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tif( !res.success ) return;\r\n\t\t\t\t\t//存储订单号\r\n\t\t\t\t\tthis.initOrder(res.data);\r\n\t\t\t\t\t//进入提交订单页面\r\n\t\t\t\t\tthis.$router.push({\r\n\t\t\t\t\t\tpath:'/order',\r\n\t\t\t\t\t\tquery:{\r\n\t\t\t\t\t\t\tdetail:JSON.stringify( this.selectList ),\r\n\t\t\t\t\t\t\tgoodsList:JSON.stringify( this.goodsList )\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t})\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\n</script>\n\n<style scoped>\r\n\theader{\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\theight: 1.173333rem;\r\n\t\tbackground-color: darkgreen;\r\n\t}\r\n\theader i{\r\n\t\tpadding:0 0.4rem;\r\n\t\tfont-size:0.586666rem;\r\n\t}\r\n\theader span{\r\n\t\tpadding:0 0.4rem;\r\n\t\tfont-size:0.426666rem;\r\n\t}\r\n\tsection{\r\n\t\tbackground-color: #f5f5f5;\r\n\t}\r\n\tsection ul{\r\n\t\t display: flex;\r\n\t\t flex-direction: column;\r\n\t}\r\n\tsection ul li{\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tpadding:0.16rem 0.533333rem;\r\n\t\tmargin:0.213333rem 0;\r\n\t\tbackground-color: #fff;\r\n\t}\r\n\tsection ul li img{\r\n\t\twidth: 1.973333rem;\r\n\t\theight: 1.973333rem;\r\n\t}\r\n\t.cart-title{\r\n\t\tdisplay: flex;\r\n\t\tpadding:0.533333rem;\r\n\t}\r\n\t.cart-title span{\r\n\t\tpadding:0 0.4rem;\r\n\t\tfont-weight: 500;\r\n\t\tfont-size:0.48rem;\r\n\t}\r\n\t.goods{\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tpadding-left: .4rem;\r\n\t\tfont-size:0.32rem;\r\n\t}\r\n\t.goods-title{\r\n\t\t display: flex;\r\n\t}\r\n\t.goods-title i{\r\n\t\tfont-size:0.586666rem;\r\n\t}\r\n\t .goods-price{\r\n\t\tpadding:0.08rem 0;\r\n\t\tcolor:#b0352f;\r\n\t}\r\n\t::v-deep .van-stepper{\r\n\t\ttext-align: right;\r\n\t}\r\n\tfooter{\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\theight: 1.28rem;\r\n\t\tborder-top:0.053333rem solid #ccc;\r\n\t}\r\n\t.radio{\r\n\t\tpadding:0 0.4rem;\r\n\t}\r\n\t.total{\r\n\t\tpadding-top: 5px;\r\n\t\tflex: 1;\r\n\t\tfont-size:0.32rem;\r\n\t}\r\n\t.total-active{\r\n\t\tcolor: #b0352f;\r\n\t}\r\n\t.order{\r\n\t\twidth: 3.2rem;\r\n\t\tline-height: 1.28rem;\r\n\t\ttext-align: center;\r\n\t\tfont-size: 0.426666rem;\r\n\t\tcolor: #fff;\r\n\t\tbackground-color: darkgreen;\r\n\t}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Cart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Cart.vue?vue&type=template&id=1c0be1ca&scoped=true&\"\nimport script from \"./Cart.vue?vue&type=script&lang=js&\"\nexport * from \"./Cart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Cart.vue?vue&type=style&index=0&id=1c0be1ca&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1c0be1ca\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","on","$event","$router","back","_v","domProps","_s","isNavStatus","isNavBar","list","length","attrs","isCheckedAll","checkAllFn","_l","item","index","key","checkItem","model","value","checked","callback","$$v","$set","expression","goods_imgUrl","goods_name","delGoodsFn","id","goods_price","changeNum","goods_num","directives","name","rawName","total","num","price","toFixed","goPay","_e","staticRenderFns","data","computed","selectList","created","methods","url","headers","token","res","v","http","method","Toast","newList","arr","path","query","detail","goodsList","component"],"sourceRoot":""}