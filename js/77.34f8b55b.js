(self["webpackChunkvue_oldbook"]=self["webpackChunkvue_oldbook"]||[]).push([[77],{9877:function(e,t,s){"use strict";s.d(t,{default:function(){return d}});var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("header",[e._m(0),t("div",[e._t("default",(function(){return[t("span",[e._v("登录")])]}))],2),e._m(1)])},o=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("i",{staticClass:"iconfont icon-fanhui"})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("i",{staticClass:"iconfont icon-fangdajing"})])}],r=s(5933),n=s.n(r),a=n(),u=s(1001),l=(0,u.Z)(a,i,o,!1,null,null,null),d=l.exports},5077:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login container"},[t("Header"),t("section",[t("div",{staticClass:"login-tel"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.userTel,expression:"userTel"}],attrs:{type:"text",placeholder:"请输入手机号",pattern:"[0-9]*"},domProps:{value:e.userTel},on:{input:function(t){t.target.composing||(e.userTel=t.target.value)}}})]),t("div",{staticClass:"login-code"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.userCode,expression:"userCode"}],attrs:{type:"text",placeholder:"请输入短信验证码",pattern:"[0-9]*"},domProps:{value:e.userCode},on:{input:function(t){t.target.composing||(e.userCode=t.target.value)}}}),t("button",{attrs:{disabled:e.disabled},on:{click:e.sendCode}},[e._v(e._s(e.codeMsg))])]),t("div",{staticClass:"login-btn",on:{click:e.login}},[e._v("登 录")]),t("div",{staticClass:"tab"},[t("span",{on:{click:e.goUserLogin}},[e._v("密码登录")]),t("span",{on:{click:e.goRegister}},[e._v("快速注册")])])]),t("Tabbar")],1)},o=[],r=(s(7658),s(527)),n=s(9877),a=s(4843),u=s(9324),l=s(629),d={data(){return{disabled:!1,userTel:"",userCode:"",rules:{userTel:{rule:/^1[23456789]\d{9}$/,msg:"手机号不能为空，并且是11位数字"}},codeNum:6,codeMsg:"获取短信验证码",code:""}},components:{Header:n["default"],Tabbar:r.Z},methods:{...(0,l.OI)(["USER_LOGIN"]),sendCode(){if(!this.validate("userTel"))return;u.Z.$axios({url:"/api/code",method:"POST",data:{phone:this.userTel}}).then((e=>{e.success&&(this.code=e.data)})),this.disabled=!0;let e=setInterval((()=>{--this.codeNum,this.codeMsg=`重新发送 ${this.codeNum}`}),1e3);setTimeout((()=>{clearInterval(e),this.codeNum=6,this.disabled=!1,this.codeMsg="获取短信验证码"}),6e3)},goRegister(){this.$router.push("/register")},goUserLogin(){this.$router.push("/userLogin")},validate(e){let t=!0;return this.rules[e].rule.test(this[e])?t:((0,a.Toast)(this.rules[e].msg),t=!1,!1)},login(){this.code==this.userCode&&u.Z.$axios({url:"/api/addUser",method:"POST",data:{phone:this.userTel}}).then((e=>{e.success&&(this.USER_LOGIN(e.data),this.$router.push("/my"))}))}}},c=d,h=s(1001),p=(0,h.Z)(c,i,o,!1,null,"6244d589",null),v=p.exports},5933:function(){}}]);
//# sourceMappingURL=77.34f8b55b.js.map