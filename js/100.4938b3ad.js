"use strict";(self["webpackChunkvue_oldbook"]=self["webpackChunkvue_oldbook"]||[]).push([[100],{5100:function(t,s,e){e.r(s),e.d(s,{default:function(){return h}});var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"cart container"},[s("header",[s("i",{staticClass:"iconfont icon-fanhui",on:{click:function(s){return t.$router.back()}}}),s("span",[t._v("购物车")]),s("span",{domProps:{textContent:t._s(t.isNavStatus?"完成":"编辑")},on:{click:t.isNavBar}})]),t.list.length?s("section",[s("div",{staticClass:"cart-title"},[s("van-checkbox",{attrs:{value:t.isCheckedAll},on:{click:t.checkAllFn}}),s("span",[t._v("商品")])],1),s("ul",t._l(t.list,(function(e,a){return s("li",{key:a},[s("div",{staticClass:"check"},[s("van-checkbox",{on:{click:function(s){return t.checkItem(a)}},model:{value:e.checked,callback:function(s){t.$set(e,"checked",s)},expression:"item.checked"}})],1),s("h2",[s("img",{attrs:{src:e.goods_imgUrl,alt:""}})]),s("div",{staticClass:"goods"},[s("div",{staticClass:"goods-title"},[s("span",[t._v(t._s(e.goods_name))]),s("i",{staticClass:"iconfont icon-icon",on:{click:function(s){return t.delGoodsFn(e.id)}}})]),s("div",{staticClass:"goods-price"},[t._v("￥"+t._s(e.goods_price))]),s("van-stepper",{attrs:{integer:""},on:{change:function(s){return t.changeNum(s,e)}},model:{value:e.goods_num,callback:function(s){t.$set(e,"goods_num",s)},expression:"item.goods_num"}})],1)])})),0)]):s("section",[t._v(" 没有购物车数据 "),s("router-link",{attrs:{to:"/home"}},[t._v("去首页逛逛吧")])],1),t.list.length?s("footer",[s("div",{staticClass:"radio"},[s("van-checkbox",{attrs:{value:t.isCheckedAll},on:{click:t.checkAllFn}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isNavStatus,expression:"!isNavStatus"}],staticClass:"total"},[s("div",[t._v("共有 "),s("span",{staticClass:"total-active"},[t._v(t._s(t.total.num))]),t._v(" 件商品 ")]),s("div",[s("span",[t._v("总计:")]),s("span",{staticClass:"total-active"},[t._v("￥"+t._s(t.total.price.toFixed(2)))])])]),t.isNavStatus?s("div",{staticClass:"order",on:{click:t.delGoodsFn}},[t._v("删除")]):s("div",{staticClass:"order",on:{click:t.goPay}},[t._v("去结算")])]):t._e()])},i=[],c=(e(7658),e(4843)),o=e(9324),n=e(629),l={name:"Cart",data(){return{isNavStatus:!1,checked:!0}},computed:{...(0,n.rn)({list:t=>t.cart.list,selectList:t=>t.cart.selectList}),...(0,n.Se)(["isCheckedAll","total"])},created(){this.getData()},methods:{...(0,n.OI)(["cartList","checkItem","initOrder"]),...(0,n.nv)(["checkAllFn","delGoodsFn"]),async getData(){let t=await o.Z.$axios({url:"/api/selectCart",methods:"post",headers:{token:!0}});t.data.forEach((t=>{t["checked"]=!0})),this.cartList(t.data)},isNavBar(){this.isNavStatus=!this.isNavStatus},changeNum(t,s){o.Z.$axios({url:"/api/updateNum",method:"post",headers:{token:!0},data:{id:s.id,num:t}})},goPay(){if(!this.selectList.length)return void(0,c.Toast)("请至少选择一件商品");let t=[];this.list.forEach((s=>{this.selectList.filter((e=>{e==s.id&&t.push(s)}))})),o.Z.$axios({url:"/api/addOrder",method:"post",headers:{token:!0},data:{arr:t}}).then((t=>{t.success&&(this.initOrder(t.data),this.$router.push({path:"/order",query:{detail:JSON.stringify(this.selectList),goodsList:JSON.stringify(this.goodsList)}}))}))}}},r=l,d=e(1001),u=(0,d.Z)(r,a,i,!1,null,"1c0be1ca",null),h=u.exports}}]);
//# sourceMappingURL=100.4938b3ad.js.map